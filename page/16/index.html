<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>JeckFS - 面朝大海，春暖花开</title><meta name="keywords" content="IT"><meta name="author" content="YFS"><meta name="copyright" content="YFS"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="快乐每一天">
<meta property="og:type" content="website">
<meta property="og:title" content="JeckFS">
<meta property="og:url" content="http://jeckfs.gitee.io/JeckFS/page/16/index.html">
<meta property="og:site_name" content="JeckFS">
<meta property="og:description" content="快乐每一天">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:author" content="YFS">
<meta property="article:tag" content="IT">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><link rel="shortcut icon" href="/JeckFS/img/favicon.png"><link rel="canonical" href="http://jeckfs.gitee.io/JeckFS/page/16/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/JeckFS/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/JeckFS/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'JeckFS',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2022-06-11 16:29:41'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.2.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/JeckFS/archives/"><div class="headline">文章</div><div class="length-num">206</div></a><a href="/JeckFS/tags/"><div class="headline">标签</div><div class="length-num">60</div></a><a href="/JeckFS/categories/"><div class="headline">分类</div><div class="length-num">55</div></a></div><hr/></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://img2.baidu.com/it/u=341242123,757592285&amp;fm=253&amp;fmt=auto&amp;app=120&amp;f=JPEG?w=1280&amp;h=800')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/JeckFS/">JeckFS</a></span><div id="menus"><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">JeckFS</h1></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/JeckFS/2020/07/03/%E5%AE%9E%E6%88%98Java%E9%AB%98%E5%B9%B6%E5%8F%912/" title="实战Java高并发2"><img class="post_bg" src="https://img1.baidu.com/it/u=2656997690,163773951&amp;fm=253&amp;fmt=auto&amp;app=120&amp;f=JPEG?w=889&amp;h=500" onerror="this.onerror=null;this.src='/JeckFS/img/404.jpg'" alt="实战Java高并发2"></a></div><div class="recent-post-info"><a class="article-title" href="/JeckFS/2020/07/03/%E5%AE%9E%E6%88%98Java%E9%AB%98%E5%B9%B6%E5%8F%912/" title="实战Java高并发2">实战Java高并发2</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-07-03T00:51:26.000Z" title="发表于 2020-07-03 08:51:26">2020-07-03</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/JeckFS/categories/%E5%AE%9E%E6%88%98Java%E9%AB%98%E5%B9%B6%E5%8F%91%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/">实战Java高并发程序设计</a></span></div><div class="content">

线程中所有的状态都在Thread中的State枚举类中定义：
线程中断：
上述程序在调用t1.interrupt()后是不会中断的。因为响应中断是需要代码来判定，中断后的处理逻辑也需要代码明示。
正确的代码是：
sleep()相应中断：
sleep()后，会将中断标记清除，如果被中断的线程还需要根据中断标记退出的话，需要再次设置中断标记。
wait()与notify()Object.wait()与Object.notify()必须在Synchronized块中，因为这两个方法都需要首先获得目标对象锁才能执行。



T2通知T1继续执行后，T1不能立即继续执行，而是要等待T2释放object锁，并重新获得锁后，才能继续执行。
wait()会释放目标对象的锁，sleep()不会释放任何资源。
join()与yield()一个无限等待，一个有时间限制的等待。不要在Thread对象上调用wait()和notify()，否则影响系统API工作。
线程组对功能分配比较明确，功能相同的多个线程进行集中管理的一种方式。它们可以同属一个线程组。12345// 估计线程组中活动线程的数目thread ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/JeckFS/2020/07/01/leetcode815-%E5%85%AC%E4%BA%A4%E7%BA%BF%E8%B7%AF/" title="leetcode815-公交线路"><img class="post_bg" src="https://img2.baidu.com/it/u=208782341,2933630295&amp;fm=253&amp;fmt=auto&amp;app=120&amp;f=JPEG?w=641&amp;h=361" onerror="this.onerror=null;this.src='/JeckFS/img/404.jpg'" alt="leetcode815-公交线路"></a></div><div class="recent-post-info"><a class="article-title" href="/JeckFS/2020/07/01/leetcode815-%E5%85%AC%E4%BA%A4%E7%BA%BF%E8%B7%AF/" title="leetcode815-公交线路">leetcode815-公交线路</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-07-01T13:44:52.000Z" title="发表于 2020-07-01 21:44:52">2020-07-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/JeckFS/categories/%E5%9B%BE-%E5%B9%BF%E5%BA%A6%E4%BC%98%E5%85%88%E9%81%8D%E5%8E%86/">图; 广度优先遍历</a></span></div><div class="content">题目描述

分析问题的关键是如何构建图的结构.将一个公交线路作为图结构中的一个节点. 一个公交线路可以包含多个站点. 计算最少乘坐的公交车数量等同于从出发节点到目的节点的最短路径. 采用广度优先即可轻松实现.
relationMap类型为HashMap, 其key是站点, value是该站点所属的公交线路(节点). 注意一个站点可以属于多个公交线路, 所以value应该是一个集合. 本代码采用Set, 经测验若为ArrayList将会超时. 
图结构采用邻接矩阵. 
节点的关系的构建:若站点n属于m个公交线路, 则这m个公交线路之间两两连通.
在同一个站点可以选择不同的公交线路(起始节点集合Start), 目的站点也可以通过不同的公交线路到达(目的节点集合End). 计算Start与End中任意两个节点的最短距离的最小值, 即为最终答案.
特殊情况:当起始站点与目的站点同属于一个公交线路(节点)时, 单独判断一下. 因此在构建图之前应判断是否是属于同一公交线路, 对于这种情况应及时返回.
代码12345678910111213141516171819202122232425262728 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/JeckFS/2020/06/15/leetcode983-%E6%9C%80%E4%BD%8E%E7%A5%A8%E4%BB%B7/" title="leetcode983-最低票价"><img class="post_bg" src="https://img1.baidu.com/it/u=2598981474,2305186611&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=800&amp;h=500" onerror="this.onerror=null;this.src='/JeckFS/img/404.jpg'" alt="leetcode983-最低票价"></a></div><div class="recent-post-info"><a class="article-title" href="/JeckFS/2020/06/15/leetcode983-%E6%9C%80%E4%BD%8E%E7%A5%A8%E4%BB%B7/" title="leetcode983-最低票价">leetcode983-最低票价</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-06-15T10:22:51.000Z" title="发表于 2020-06-15 18:22:51">2020-06-15</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/JeckFS/categories/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">动态规划</a></span></div><div class="content">题目描述


分析状态定义：d[i]表示第i天之前的出游计划都已经完成，所用的最低消费。
状态转移方程：d[i]=min&#123;d[i-1] + costs[0], d[i - 7] + costs[1], d[i - 30] + costs[2], d[i - 1] if travel[i] = false&#125;，其中travel[i] = false表示第i天没有出游计划，= true表示有。
代码123456789101112131415161718192021public class Solution &#123;    // 1ms 98.68%(中文) 1ms 82.07%(英文)    public int mincostTickets(int[] days, int[] costs) &#123;        boolean[] travel = new boolean[366];        for (int i : days) &#123;            travel[i] = true;        &#125;        int[]  ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/JeckFS/2020/06/15/Class%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84CONSTANT-MethodHandle-info%E5%B8%B8%E9%87%8F/" title="Class文件中的CONSTANT_MethodHandle_info常量"><img class="post_bg" src="https://img0.baidu.com/it/u=3927742728,83245337&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=800&amp;h=500" onerror="this.onerror=null;this.src='/JeckFS/img/404.jpg'" alt="Class文件中的CONSTANT_MethodHandle_info常量"></a></div><div class="recent-post-info"><a class="article-title" href="/JeckFS/2020/06/15/Class%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84CONSTANT-MethodHandle-info%E5%B8%B8%E9%87%8F/" title="Class文件中的CONSTANT_MethodHandle_info常量">Class文件中的CONSTANT_MethodHandle_info常量</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-06-15T03:59:58.000Z" title="发表于 2020-06-15 11:59:58">2020-06-15</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/JeckFS/categories/%E6%9D%82%E8%B0%88/">杂谈</a></span></div><div class="content">CONSTANT_MethodHandle_info在字节码文件中的格式：
reference_kind的取值：
reference_index的取值：

对于Kind=1，2，3，4，reference_index引用一个CONSTANT_Fieldref_info
对于Kind=5，6，7，8，reference_index引用一个CONSTANT_Methodref_info
对于Kind=9，reference_index引用一个CONSTANT_InterfaceMethodref_info


CONSTANT_Fieldref_info在字节码文件中的格式：12345CONSTANT_Fieldref_info &#123;  u1 tag;  u2 class_index;  u2 name_and_type_index;&#125;tag=9，表示一个引用field信息，包括静态field和实例field。class_index 是常量池中一个CONSTANT_Class_info类型常量（类/接口）的索引，表示字段 field 归属类。name_and_type_i ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/JeckFS/2020/06/14/%E5%AE%9E%E6%88%98Java%E9%AB%98%E5%B9%B6%E5%8F%911/" title="实战Java高并发1"><img class="post_bg" src="https://img2.baidu.com/it/u=1787475710,2159333383&amp;fm=253&amp;fmt=auto&amp;app=120&amp;f=JPEG?w=1280&amp;h=800" onerror="this.onerror=null;this.src='/JeckFS/img/404.jpg'" alt="实战Java高并发1"></a></div><div class="recent-post-info"><a class="article-title" href="/JeckFS/2020/06/14/%E5%AE%9E%E6%88%98Java%E9%AB%98%E5%B9%B6%E5%8F%911/" title="实战Java高并发1">实战Java高并发1</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-06-14T14:02:00.000Z" title="发表于 2020-06-14 22:02:00">2020-06-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/JeckFS/categories/%E5%AE%9E%E6%88%98Java%E9%AB%98%E5%B9%B6%E5%8F%91%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/">实战Java高并发程序设计</a></span></div><div class="content">一些概念1.并发与并行


2.死锁、饥饿、活锁死锁：每个线程永远获取不到自己想要的资源，导致本线程一直永远阻塞下去。

死锁发生条件：互斥条件：线程对资源的访问是排他性的，如果一个线程对占用了某资源，那么其他线程必须处于等待状态，直到资源被释放。请求和保持条件：线程T1至少已经保持了一个资源R1占用,但又提出对另一个资源R2请求，而此时，资源R2被其他线程T2占用，于是该线程T1也必须等待，但又对自己保持的资源R1不释放。不剥夺条件：线程已获得的资源，在未使用完之前，不能被其他线程剥夺，只能在使用完以后由自己释放。环路等待条件：在死锁发生时，必然存在一个“进程-资源环形链”，即：{p0,p1,p2,…pn},进程p0（或线程）等待p1占用的资源，p1等待p2占用的资源，pn等待p0占用的资源。（最直观的理解是，p0等待p1占用的资源，而p1而在等待p0占用的资源，于是两个进程就相互等待）

饥饿：指的是一个或多个线程无法获得所需的资源，导致一直无法执行。

如高优先级线程总抢在低优先级线程之前执行，导致低优先级线程得不到执行。

活锁：线程之间互相谦让，主动将资源让给其他线程，导致资 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/JeckFS/2020/06/13/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E8%99%9A%E6%8B%9F%E6%9C%BA9/" title="深入理解Java虚拟机9"><img class="post_bg" src="https://img1.baidu.com/it/u=2231100910,1753720113&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=889&amp;h=500" onerror="this.onerror=null;this.src='/JeckFS/img/404.jpg'" alt="深入理解Java虚拟机9"></a></div><div class="recent-post-info"><a class="article-title" href="/JeckFS/2020/06/13/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E8%99%9A%E6%8B%9F%E6%9C%BA9/" title="深入理解Java虚拟机9">深入理解Java虚拟机9</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-06-13T08:26:59.000Z" title="发表于 2020-06-13 16:26:59">2020-06-13</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/JeckFS/categories/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E8%99%9A%E6%8B%9F%E6%9C%BA/">深入理解Java虚拟机</a></span></div><div class="content">
类加载器案例
Tomcat
不同目录的类库的隔离：派生出不同的类加载器，不同目录的加载器加载对应目录的类库。


OSGi
每个Bundle都有自己的类加载器，用于加载本Bundle的类(包括发布的和未发布的)。
每个Bundle可以发布自己的某些Package，也可以依赖其他Bundle的Package。
注意：依赖其他Bundle的Package中的类，交由对应Bundle的类加载器加载。
类加载器之间是一种网状结构。
Bundle循环依赖的死锁问题：
原因：本Bundle在加载依赖于其他Bundle的类时，会锁定本Bundle的类加载器。
解决：使用ClassLoader类的registerAsParallelCapable()对并行的类加载进行注册声明，把锁的级别由ClassLoader降为要加载的这个类。




实战：远程加载并执行代码
使用自定义类加载就是显示调用ClassLoader的defineClass()
一个测试类对应一个自定义的ClassLoader，测试类执行完毕，加载该测试类的ClassLoader自动销毁
劫持System.out(将字节码文件的Sys ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/JeckFS/2020/06/08/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E8%99%9A%E6%8B%9F%E6%9C%BA8/" title="深入理解Java虚拟机8"><img class="post_bg" src="https://img1.baidu.com/it/u=2709423071,2700494803&amp;fm=253&amp;fmt=auto&amp;app=120&amp;f=JPEG?w=500&amp;h=281" onerror="this.onerror=null;this.src='/JeckFS/img/404.jpg'" alt="深入理解Java虚拟机8"></a></div><div class="recent-post-info"><a class="article-title" href="/JeckFS/2020/06/08/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E8%99%9A%E6%8B%9F%E6%9C%BA8/" title="深入理解Java虚拟机8">深入理解Java虚拟机8</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-06-08T05:32:23.000Z" title="发表于 2020-06-08 13:32:23">2020-06-08</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/JeckFS/categories/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E8%99%9A%E6%8B%9F%E6%9C%BA/">深入理解Java虚拟机</a></span></div><div class="content">
运行时栈帧结构
局部变量表
作用
大小
变量槽
变量槽的重用
依据是变量的作用域


32位变量占用1个slot，64位变量占用2个相邻的变量槽
reference变量的作用
索引到对象在Java堆中的起始地址
查找到对象所属类型在方法区中的类型信息




局部变量的回收
将要回收的标志
作用域
手动设null的优缺点




操作数栈
作用
算术运算
方法参数传递


栈帧重叠
用于参数传递减少额外参数复制传递的开销




动态连接
动态连接的概念
静态解析的概念
两者的本质是由符号引用转化为直接引用的过程，区别在于转化发生的时间


方法返回地址
正常调用完成时返回
异常调用完成时返回


附加信息
与调试、性能收集相关
取决于虚拟机的实现








方法调用
两种方式
解析
编译期确定，类加载阶段完成
解析的对象
invokestatic—静态方法
invokespecial—实例构造器&lt;init&gt;()、私有方法、父类方法
final修饰的方法




分派
两对概念
静态类型(编译期可知) —- 静态分派 —- 方法重载
实际类型(运行期可知) —- 动 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/JeckFS/2020/06/02/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E8%99%9A%E6%8B%9F%E6%9C%BA7/" title="深入理解Java虚拟机7"><img class="post_bg" src="https://img1.baidu.com/it/u=2656997690,163773951&amp;fm=253&amp;fmt=auto&amp;app=120&amp;f=JPEG?w=889&amp;h=500" onerror="this.onerror=null;this.src='/JeckFS/img/404.jpg'" alt="深入理解Java虚拟机7"></a></div><div class="recent-post-info"><a class="article-title" href="/JeckFS/2020/06/02/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E8%99%9A%E6%8B%9F%E6%9C%BA7/" title="深入理解Java虚拟机7">深入理解Java虚拟机7</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-06-02T00:00:47.000Z" title="发表于 2020-06-02 08:00:47">2020-06-02</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/JeckFS/categories/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E8%99%9A%E6%8B%9F%E6%9C%BA/">深入理解Java虚拟机</a></span></div><div class="content">
[类加载]
1.类加载机制
class文件—内存—数据校验、转换解析、初始化—虚拟机直接可用的Java类型


2.类的生命周期
1.加载
2.连接
1.验证
2.准备
3.解析


3.初始化
4.使用
5.卸载


3.示例结论
子类通过继承关系引用父类的静态字段，子类不会初始化
通过数组定义来引用类，不会导致该类的初始化
引用其他类的final常量，被引用类不会被初始化(常量传播优化)


4.类加载过程
1.加载
主要任务
通过类的全限定名获取二进制字节流
将字节流由静态存储结构转变为方法区的运行时数据结构
生成该类的访问入口(Class对象)


数组类型的加载
加载流程
不断获取组件类型直到元素类型为止，元素类型为引用类型时为原始类型时情况不一样。


数组类由虚拟机在内存中动态构造，其元素类型由类加载器加载完成。




2.验证
文件格式验证
验证的是字节码的格式
能正确解析字节流并存储于方法区内


元数据验证
类是否有父类
类继承是否合法
是否实现了抽象类或接口中的所有方法
类中字段是否与父类产生矛盾


字节码验证 (验证的是Code属性)
通过数据流分析控制流 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/JeckFS/2020/05/28/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E8%99%9A%E6%8B%9F%E6%9C%BA6/" title="深入理解Java虚拟机6"><img class="post_bg" src="https://img1.baidu.com/it/u=2860717797,2343059675&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=889&amp;h=500" onerror="this.onerror=null;this.src='/JeckFS/img/404.jpg'" alt="深入理解Java虚拟机6"></a></div><div class="recent-post-info"><a class="article-title" href="/JeckFS/2020/05/28/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E8%99%9A%E6%8B%9F%E6%9C%BA6/" title="深入理解Java虚拟机6">深入理解Java虚拟机6</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-05-28T11:38:56.000Z" title="发表于 2020-05-28 19:38:56">2020-05-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/JeckFS/categories/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E8%99%9A%E6%8B%9F%E6%9C%BA/">深入理解Java虚拟机</a></span></div><div class="content">
[Class文件结构]
魔数(magic)
主版本号(major_version)
次版本号(minor_version)
常量池(constant_pool)
分类
字面量
符号引用


17种常量类型结构


访问标志(access_flags)
public? final? 接口？abstract？注解？枚举？模块？类是否由用户代码生成


类索引(this_class)、父类索引(super_class)与接口索引集合(interfaces)
类索引查找全限定名的过程


字段表(field_info)集合
描述对象：接口、类变量、实例变量。方法内的局部变量除外。
字段修饰符(access_flags)
public,private,protected,static,final,volatile,transient,enum


name_index：字段的简单名称
descriptor_index：字段和方法的描述符
字段描述符
基本类型
对象类型
void


方法描述符：(参数的类型描述符)+返回值类型的描述符


方法表集合(methods)
access_flags ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/JeckFS/2020/05/28/%E6%9C%AC%E5%9C%B0idea%E5%AE%89%E8%A3%85jclasslib%E6%8F%92%E4%BB%B6/" title="本地idea安装jclasslib插件"><img class="post_bg" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/JeckFS/img/404.jpg'" alt="本地idea安装jclasslib插件"></a></div><div class="recent-post-info"><a class="article-title" href="/JeckFS/2020/05/28/%E6%9C%AC%E5%9C%B0idea%E5%AE%89%E8%A3%85jclasslib%E6%8F%92%E4%BB%B6/" title="本地idea安装jclasslib插件">本地idea安装jclasslib插件</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-05-28T06:25:25.000Z" title="发表于 2020-05-28 14:25:25">2020-05-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/JeckFS/categories/Intellij-Idea/">Intellij Idea</a></span></div><div class="content">1. 下载插件压缩包点击下载地址，搜索jclasslib并下载与Intellij Idea对应版本的压缩包。


点击右上角的Get。
2. 本地安装settings —&gt; Plugins —&gt; Install Plugin from Disk
从磁盘中找到插件的压缩包。并点击OK按钮。点击OK按钮，然后根据提示重启Idea。插件jclasslib安装成功。
3. jclasslib的使用编译Java源文件：Build —&gt; Build Project。查看字节码：View —&gt; Show Bytecode with jclasslib
</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/JeckFS/page/15/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/JeckFS/">1</a><span class="space">&hellip;</span><a class="page-number" href="/JeckFS/page/15/#content-inner">15</a><span class="page-number current">16</span><a class="page-number" href="/JeckFS/page/17/#content-inner">17</a><span class="space">&hellip;</span><a class="page-number" href="/JeckFS/page/21/#content-inner">21</a><a class="extend next" rel="next" href="/JeckFS/page/17/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/JeckFS/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">YFS</div><div class="author-info__description">快乐每一天</div></div><div class="card-info-data site-data is-center"><a href="/JeckFS/archives/"><div class="headline">文章</div><div class="length-num">206</div></a><a href="/JeckFS/tags/"><div class="headline">标签</div><div class="length-num">60</div></a><a href="/JeckFS/categories/"><div class="headline">分类</div><div class="length-num">55</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/JeckFS/2022/06/11/%E5%85%B3%E4%BA%8E%E9%80%92%E5%BD%92%E7%9A%84%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E5%9C%B0%E6%96%B9/" title="关于递归的需要注意的地方"><img src="https://img2.baidu.com/it/u=2566230917,2808117782&amp;fm=253&amp;fmt=auto&amp;app=120&amp;f=JPEG?w=889&amp;h=500" onerror="this.onerror=null;this.src='/JeckFS/img/404.jpg'" alt="关于递归的需要注意的地方"/></a><div class="content"><a class="title" href="/JeckFS/2022/06/11/%E5%85%B3%E4%BA%8E%E9%80%92%E5%BD%92%E7%9A%84%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E5%9C%B0%E6%96%B9/" title="关于递归的需要注意的地方">关于递归的需要注意的地方</a><time datetime="2022-06-11T08:04:23.000Z" title="发表于 2022-06-11 16:04:23">2022-06-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/JeckFS/2022/06/10/Hello-Test/" title="Hello_Test"><img src="https://img2.baidu.com/it/u=341242123,757592285&amp;fm=253&amp;fmt=auto&amp;app=120&amp;f=JPEG?w=1280&amp;h=800" onerror="this.onerror=null;this.src='/JeckFS/img/404.jpg'" alt="Hello_Test"/></a><div class="content"><a class="title" href="/JeckFS/2022/06/10/Hello-Test/" title="Hello_Test">Hello_Test</a><time datetime="2022-06-10T01:53:56.000Z" title="发表于 2022-06-10 09:53:56">2022-06-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/JeckFS/2022/06/09/Hello-World-0/" title="Hello_World"><img src="https://img1.baidu.com/it/u=2709423071,2700494803&amp;fm=253&amp;fmt=auto&amp;app=120&amp;f=JPEG?w=500&amp;h=281" onerror="this.onerror=null;this.src='/JeckFS/img/404.jpg'" alt="Hello_World"/></a><div class="content"><a class="title" href="/JeckFS/2022/06/09/Hello-World-0/" title="Hello_World">Hello_World</a><time datetime="2022-06-09T13:10:36.000Z" title="发表于 2022-06-09 21:10:36">2022-06-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/JeckFS/2022/06/09/hello-world/" title="Hello World"><img src="https://t7.baidu.com/it/u=1732966997,2981886582&amp;fm=193&amp;f=GIF" onerror="this.onerror=null;this.src='/JeckFS/img/404.jpg'" alt="Hello World"/></a><div class="content"><a class="title" href="/JeckFS/2022/06/09/hello-world/" title="Hello World">Hello World</a><time datetime="2022-06-09T12:24:23.000Z" title="发表于 2022-06-09 20:24:23">2022-06-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/JeckFS/2022/06/07/leetcode638-%E5%A4%A7%E7%A4%BC%E5%8C%85/" title="leetcode638-大礼包"><img src="https://img1.baidu.com/it/u=2860717797,2343059675&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=889&amp;h=500" onerror="this.onerror=null;this.src='/JeckFS/img/404.jpg'" alt="leetcode638-大礼包"/></a><div class="content"><a class="title" href="/JeckFS/2022/06/07/leetcode638-%E5%A4%A7%E7%A4%BC%E5%8C%85/" title="leetcode638-大礼包">leetcode638-大礼包</a><time datetime="2022-06-07T08:52:59.000Z" title="发表于 2022-06-07 16:52:59">2022-06-07</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/JeckFS/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/JeckFS/categories/Docker/"><span class="card-category-list-name">Docker</span><span class="card-category-list-count">4</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/JeckFS/categories/Go/"><span class="card-category-list-name">Go</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/JeckFS/categories/Gradle/"><span class="card-category-list-name">Gradle</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/JeckFS/categories/HashMap/"><span class="card-category-list-name">HashMap</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/JeckFS/categories/Intellij-Idea/"><span class="card-category-list-name">Intellij Idea</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/JeckFS/categories/Java/"><span class="card-category-list-name">Java</span><span class="card-category-list-count">3</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/JeckFS/categories/JavaScript/"><span class="card-category-list-name">JavaScript</span><span class="card-category-list-count">6</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/JeckFS/categories/Linux/"><span class="card-category-list-name">Linux</span><span class="card-category-list-count">11</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/JeckFS/tags/Android/" style="font-size: 1.1em; color: #999">Android</a> <a href="/JeckFS/tags/Docker/" style="font-size: 1.25em; color: #999fa7">Docker</a> <a href="/JeckFS/tags/Electron/" style="font-size: 1.1em; color: #999">Electron</a> <a href="/JeckFS/tags/Go/" style="font-size: 1.1em; color: #999">Go</a> <a href="/JeckFS/tags/Gradle/" style="font-size: 1.1em; color: #999">Gradle</a> <a href="/JeckFS/tags/HashMap/" style="font-size: 1.15em; color: #999b9e">HashMap</a> <a href="/JeckFS/tags/Intellij-Idea/" style="font-size: 1.1em; color: #999">Intellij Idea</a> <a href="/JeckFS/tags/Java/" style="font-size: 1.2em; color: #999da3">Java</a> <a href="/JeckFS/tags/JavaScript/" style="font-size: 1.35em; color: #99a3b1">JavaScript</a> <a href="/JeckFS/tags/Linux/" style="font-size: 1.45em; color: #99a7ba">Linux</a> <a href="/JeckFS/tags/MySQL/" style="font-size: 1.15em; color: #999b9e">MySQL</a> <a href="/JeckFS/tags/NetLogo/" style="font-size: 1.1em; color: #999">NetLogo</a> <a href="/JeckFS/tags/Spring/" style="font-size: 1.2em; color: #999da3">Spring</a> <a href="/JeckFS/tags/SpringBoot/" style="font-size: 1.15em; color: #999b9e">SpringBoot</a> <a href="/JeckFS/tags/SpringCloud/" style="font-size: 1.3em; color: #99a1ac">SpringCloud</a> <a href="/JeckFS/tags/Spring%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/" style="font-size: 1.1em; color: #999">Spring源码阅读</a> <a href="/JeckFS/tags/git/" style="font-size: 1.1em; color: #999">git</a> <a href="/JeckFS/tags/java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%9A%84%E8%89%BA%E6%9C%AF/" style="font-size: 1.25em; color: #999fa7">java并发编程的艺术</a> <a href="/JeckFS/tags/kubernetes/" style="font-size: 1.2em; color: #999da3">kubernetes</a> <a href="/JeckFS/tags/leetcode/" style="font-size: 1.25em; color: #999fa7">leetcode</a> <a href="/JeckFS/tags/leetcode%E5%85%B6%E4%BB%96/" style="font-size: 1.35em; color: #99a3b1">leetcode其他</a> <a href="/JeckFS/tags/maven/" style="font-size: 1.1em; color: #999">maven</a> <a href="/JeckFS/tags/mysql/" style="font-size: 1.2em; color: #999da3">mysql</a> <a href="/JeckFS/tags/other/" style="font-size: 1.1em; color: #999">other</a> <a href="/JeckFS/tags/others/" style="font-size: 1.2em; color: #999da3">others</a> <a href="/JeckFS/tags/python/" style="font-size: 1.1em; color: #999">python</a> <a href="/JeckFS/tags/spring-security/" style="font-size: 1.1em; color: #999">spring-security</a> <a href="/JeckFS/tags/%E5%85%B6%E4%BB%96/" style="font-size: 1.15em; color: #999b9e">其他</a> <a href="/JeckFS/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" style="font-size: 1.1em; color: #999">分布式</a> <a href="/JeckFS/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 1.2em; color: #999da3">前端</a> <a href="/JeckFS/tags/%E5%89%91%E6%8C%87offer/" style="font-size: 1.25em; color: #999fa7">剑指offer</a> <a href="/JeckFS/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" style="font-size: 1.5em; color: #99a9bf">动态规划</a> <a href="/JeckFS/tags/%E5%8D%95%E8%B0%83%E6%A0%88/" style="font-size: 1.1em; color: #999">单调栈</a> <a href="/JeckFS/tags/%E5%9B%BE-%E5%B9%BF%E5%BA%A6%E4%BC%98%E5%85%88%E9%81%8D%E5%8E%86/" style="font-size: 1.15em; color: #999b9e">图; 广度优先遍历</a> <a href="/JeckFS/tags/%E5%A4%A7%E5%9E%8B%E7%BD%91%E7%AB%99%E6%8A%80%E6%9C%AF%E6%9E%B6%E6%9E%84%E6%9D%8E%E6%99%BA%E6%85%A7/" style="font-size: 1.1em; color: #999">大型网站技术架构李智慧</a> <a href="/JeckFS/tags/%E5%AD%97%E5%85%B8%E6%A0%91/" style="font-size: 1.1em; color: #999">字典树</a> <a href="/JeckFS/tags/%E5%AE%9E%E6%88%98Java%E9%AB%98%E5%B9%B6%E5%8F%91%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/" style="font-size: 1.25em; color: #999fa7">实战Java高并发程序设计</a> <a href="/JeckFS/tags/%E5%B0%8F%E7%8E%A9%E6%84%8F%E5%84%BF/" style="font-size: 1.1em; color: #999">小玩意儿</a> <a href="/JeckFS/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" style="font-size: 1.4em; color: #99a5b6">微服务</a> <a href="/JeckFS/tags/%E6%8E%92%E5%BA%8F/" style="font-size: 1.1em; color: #999">排序</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/JeckFS/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/JeckFS/archives/2022/06/"><span class="card-archive-list-date">六月 2022</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/JeckFS/archives/2022/05/"><span class="card-archive-list-date">五月 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/JeckFS/archives/2022/04/"><span class="card-archive-list-date">四月 2022</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/JeckFS/archives/2022/03/"><span class="card-archive-list-date">三月 2022</span><span class="card-archive-list-count">10</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/JeckFS/archives/2022/02/"><span class="card-archive-list-date">二月 2022</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/JeckFS/archives/2022/01/"><span class="card-archive-list-date">一月 2022</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/JeckFS/archives/2021/12/"><span class="card-archive-list-date">十二月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/JeckFS/archives/2021/11/"><span class="card-archive-list-date">十一月 2021</span><span class="card-archive-list-count">2</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">206</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2022-06-11T08:29:40.527Z"></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By YFS</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/JeckFS/js/utils.js"></script><script src="/JeckFS/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>