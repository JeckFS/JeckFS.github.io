<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>sed | JeckFS</title><meta name="keywords" content="Linux"><meta name="author" content="YFS"><meta name="copyright" content="YFS"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="0. 补充常用正则参考来源     元字符 功能 示例     ^ 行首定位符 &#x2F;^my&#x2F;匹配所有以 my 开头的行   $ 行尾定位符 &#x2F;my$&#x2F;匹配所有以my结尾的行   . 匹配除换行符以外的单个字符 &#x2F;m..y&#x2F;  匹配包含字母m，后跟两个任意字符，再跟字母y的行   * 匹配零个或多个前导字符 &#x2F;my*&#x2F;  匹配包含字母m,后跟零个或多个y字母的行   [] 匹配不在指定字符组内的任一字">
<meta property="og:type" content="article">
<meta property="og:title" content="sed">
<meta property="og:url" content="http://jeckfs.gitee.io/JeckFS/2020/04/09/sed/index.html">
<meta property="og:site_name" content="JeckFS">
<meta property="og:description" content="0. 补充常用正则参考来源     元字符 功能 示例     ^ 行首定位符 &#x2F;^my&#x2F;匹配所有以 my 开头的行   $ 行尾定位符 &#x2F;my$&#x2F;匹配所有以my结尾的行   . 匹配除换行符以外的单个字符 &#x2F;m..y&#x2F;  匹配包含字母m，后跟两个任意字符，再跟字母y的行   * 匹配零个或多个前导字符 &#x2F;my*&#x2F;  匹配包含字母m,后跟零个或多个y字母的行   [] 匹配不在指定字符组内的任一字">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://img1.baidu.com/it/u=2860717797,2343059675&fm=253&fmt=auto&app=138&f=JPEG?w=889&h=500">
<meta property="article:published_time" content="2020-04-09T03:01:33.000Z">
<meta property="article:modified_time" content="2022-12-09T12:36:58.462Z">
<meta property="article:author" content="YFS">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img1.baidu.com/it/u=2860717797,2343059675&fm=253&fmt=auto&app=138&f=JPEG?w=889&h=500"><link rel="shortcut icon" href="/JeckFS/img/favicon.png"><link rel="canonical" href="http://jeckfs.gitee.io/JeckFS/2020/04/09/sed/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/JeckFS/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/JeckFS/',
  algolia: undefined,
  localSearch: {"path":"/JeckFS/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'sed',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-12-09 20:36:58'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.2.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/JeckFS/archives/"><div class="headline">文章</div><div class="length-num">256</div></a><a href="/JeckFS/tags/"><div class="headline">标签</div><div class="length-num">72</div></a><a href="/JeckFS/categories/"><div class="headline">分类</div><div class="length-num">67</div></a></div><hr/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://img1.baidu.com/it/u=2860717797,2343059675&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=889&amp;h=500')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/JeckFS/">JeckFS</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">sed</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-04-09T03:01:33.000Z" title="发表于 2020-04-09 11:01:33">2020-04-09</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-12-09T12:36:58.462Z" title="更新于 2022-12-09 20:36:58">2022-12-09</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/JeckFS/categories/Linux/">Linux</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="sed"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="0-补充"><a href="#0-补充" class="headerlink" title="0. 补充"></a>0. 补充</h1><p><strong>常用正则</strong><a target="_blank" rel="noopener" href="https://www.cnblogs.com/liaojie970/p/6782707.html">参考来源</a></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>元字符</th>
<th>功能</th>
<th>示例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>^</code></td>
<td>行首定位符</td>
<td><code>/^my/</code>匹配所有以 my 开头的行</td>
</tr>
<tr>
<td><code>$</code></td>
<td>行尾定位符</td>
<td><code>/my$/</code>匹配所有以my结尾的行</td>
</tr>
<tr>
<td><code>.</code></td>
<td>匹配除换行符以外的单个字符</td>
<td><code>/m..y/</code>  匹配包含字母m，后跟两个任意字符，再跟字母y的行</td>
</tr>
<tr>
<td><code>*</code></td>
<td>匹配零个或多个前导字符</td>
<td><code>/my*/</code>  匹配包含字母m,后跟零个或多个y字母的行</td>
</tr>
<tr>
<td><code>[]</code></td>
<td>匹配不在指定字符组内的任一字符</td>
<td><code>/[Mm]y/</code>  匹配包含My或my的行</td>
</tr>
<tr>
<td><code>[^]</code></td>
<td>匹配不在指定字符组内的任一字符</td>
<td><code>/[^Mm]y/</code>  匹配包含y，但y之前的那个字符不是M或m的行</td>
</tr>
<tr>
<td><code>..</code></td>
<td>保存已匹配的字符</td>
<td><code>1,20s/youself/\1r/</code>  标记元字符之间的模式，并将其保存为标签1，之后可以使用\1来引用它。最多可以定义9个标签，从左边开始编号，最左边的是第一个。此例中，对第1到第20行进行处理，you被保存为标签1，如果发现youself，则替换为your。</td>
</tr>
<tr>
<td><code>&amp;</code></td>
<td>保存查找串以便在替换串中引用</td>
<td><code>s/my/**&amp;**/</code>  符号&amp;代表查找串。my将被替换为<code>**my**</code></td>
</tr>
<tr>
<td><code>\&lt;</code></td>
<td>词首定位符</td>
<td><code>/\&lt;my/</code>  匹配包含以my开头的单词的行</td>
</tr>
<tr>
<td><code>\&gt;</code></td>
<td>词尾定位符</td>
<td><code>/my\&gt;/</code>  匹配包含以my结尾的单词的行</td>
</tr>
<tr>
<td><code>x\&#123;m\&#125;</code></td>
<td>连续m个x</td>
<td><code>/9\&#123;5\&#125;/</code> 匹配包含连续5个9的行</td>
</tr>
<tr>
<td><code>x\&#123;m,\&#125;</code></td>
<td>至少m个x</td>
<td><code>/9\&#123;5,\&#125;/</code>  匹配包含至少连续5个9的行</td>
</tr>
<tr>
<td><code>x\&#123;m,n\&#125;</code></td>
<td>至少m个，但不超过n个x</td>
<td><code>/9\&#123;5,7\&#125;/</code>  匹配包含连续5到7个9的行</td>
</tr>
</tbody>
</table>
</div>
<p><strong>字符匹配</strong><a target="_blank" rel="noopener" href="https://qianngchn.github.io/wiki/4.html">参考来源</a></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>元字符</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>\w</code></td>
<td>匹配字母或数字或下划线</td>
</tr>
<tr>
<td><code>\W</code></td>
<td>与<code>\w</code>相反，匹配除了字母、数字、下划线之外的字符</td>
</tr>
<tr>
<td><code>\s</code></td>
<td>任意的空白符(包括空格制表符换页符)</td>
</tr>
<tr>
<td><code>\b</code></td>
<td>匹配一个单词的边界符：字符的左边是一个单词字符，并且右边是一个非单词字符，反之亦然。</td>
</tr>
<tr>
<td><code>\B</code></td>
<td>匹配除单词边界符外所有字符：字符的左边和右边同时是单词字符或非单词字符。</td>
</tr>
<tr>
<td><code>\n</code></td>
<td>匹配一个换行字符。</td>
</tr>
<tr>
<td><code>\r</code></td>
<td>匹配一个回车字符。</td>
</tr>
<tr>
<td><code>\t</code></td>
<td>匹配一个水平Tab字符。</td>
</tr>
<tr>
<td><code>\v</code></td>
<td>匹配一个垂直Tab字符。</td>
</tr>
<tr>
<td><code>\cX</code></td>
<td>匹配Control+X，X是任意字符。</td>
</tr>
<tr>
<td><code>\dXXX</code></td>
<td>匹配一个ASCII码是十进制XXX的字符。</td>
</tr>
<tr>
<td><code>\oXXX</code></td>
<td>匹配一个ASCII码是八进制XXX的字符。</td>
</tr>
<tr>
<td><code>\xXX</code></td>
<td>匹配一个ASCII码是十六进制XX的字符。</td>
</tr>
</tbody>
</table>
</div>
<p><strong>需要转义的特殊字符：</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>基本正则表达式</th>
<th>扩展正则表达式</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>\?</code></td>
<td><code>?</code></td>
</tr>
<tr>
<td><code>\+</code></td>
<td><code>+</code></td>
</tr>
<tr>
<td><code>\&#123;  \&#125;</code></td>
<td><code>&#123;  &#125;</code></td>
</tr>
<tr>
<td><code>\(  \)</code></td>
<td><code>(  )</code></td>
</tr>
<tr>
<td>\ &#124;</td>
<td>&#124;</td>
</tr>
</tbody>
</table>
</div>
<p><strong>使用 sed 的参数 -r 可以直接使用 <code>扩展正则表达式</code></strong></p>
<p><strong>零碎补充</strong></p>
<ul>
<li>替换匹配行的指定后面三行的数字替换为20214。<strong>通过<code>n;</code>对多行后的行进行替换</strong>。<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将liveliness监听的端口更改为 20214</span></span><br><span class="line">sed -i <span class="string">&#x27;/live/&#123;n;n;n;s/[[:digit:]]\&#123;1,\&#125;/20214/&#125;&#x27;</span> jup-app.yaml</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="1-鸟哥私房菜"><a href="#1-鸟哥私房菜" class="headerlink" title="1. 鸟哥私房菜"></a>1. 鸟哥私房菜</h1><h2 id="1-1-sed常用功能"><a href="#1-1-sed常用功能" class="headerlink" title="1.1 sed常用功能"></a>1.1 sed常用功能</h2><ul>
<li>对standard input进行增删改，取代；</li>
<li>显示处理过后的行；</li>
<li>以行为单位的部分数据的搜寻与取代（可以使用正则）；</li>
<li>修改文件内容；</li>
<li>可以只显示想看到的数据；</li>
<li>sed ‘s/要被取代的字符串/新的字符串/g’</li>
<li>修改文件内容：sed -i ‘s/要被取代的字符串/新的字符串/g’ filename</li>
</ul>
<p><code>sed [-nefr] [动作]</code><br>选项与参数:<br><code>-n</code>: 使用安静(silent)模式。在一般 sed 的用法中,所有来自 STDIN 的数据一般都会被列出到屏幕上。但如果加上 -n 参数后,则只有经过 sed 特殊处理的那一行(或者动作)才会被列出来。<br><code>-e</code>: 直接在指令列模式上进行 sed 的动作编辑;<br><code>-f</code> :直接将 sed 的动作写在一个文件内, -f filename 则可以执行 filename 内的 sed 动作;<br><code>-r</code> :sed 的动作支持的是延伸型正规表示法的语法。(预设是基础正规表示法语法)<br><code>-i</code> :直接修改读取的文件内容,而不是由屏幕输出。<br>动作说明:<br><code>[n1[,n2]]function</code><br><code>n1, n2</code> :不见得会存在,一般代表『选择进行动作的行数』,举例来说,如果我的动作是需要在 10 到 20 行之间进行的,则『 10,20[动作行为] 』<br>function 有底下这些咚咚:<br><code>a</code> :新增, a 的后面可以接字符串,而这些字符串会在新的一行出现(目前的下一行)~<br><code>c</code> :取代, c 的后面可以接字符串,这些字符串可以取代 n1,n2 之间的行!<br><code>d</code> :删除,因为是删除啊,所以 d 后面通常不接任何咚咚;<br><code>i</code> :插入, i 的后面可以接字符串,而这些字符串会在新的一行出现(目前的上一行);<br><code>p</code> :打印,亦即将某个选择的数据印出。通常 p 会与参数 sed -n 一起运作~<br><code>s</code> :取代,可以直接进行取代的工作哩!通常这个 s 的动作可以搭配正规表示法!<br>例如 1,20s/old/new/g 就是啦!</p>
<img src="/JeckFS/2020/04/09/sed/sed-1.png" class="" title="This is an image.">
<img src="/JeckFS/2020/04/09/sed/sed-2.png" class="" title="This is an image.">
<img src="/JeckFS/2020/04/09/sed/sed-3.png" class="" title="This is an image.">
<p><a target="_blank" rel="noopener" href="https://man.linuxde.net/sed">参考教程</a></p>
<h1 id="2-sed-pdf教程"><a href="#2-sed-pdf教程" class="headerlink" title="2. sed pdf教程"></a>2. sed pdf教程</h1><p><strong>命令格式：</strong><br><code>sed options… [script] [inputfile]</code><br><strong>script格式：</strong><br>    <code>[addr]X[options]</code><br><code>addr</code>: line address.描述行的地址，即对什么样的行操作指令X<br><code>X</code>: command<br><code>options</code>: X的参数<br>如:<br>    sed ‘30,50d’ input.txt # 将input.txt文件的30-50行删除<br>    sed ‘/^foo/d;s/hello/world’ input.txt # 将input.txt文件中以foo开头的行删除，并且将hello替换为world。</p>
<h2 id="2-1-How-sed-works"><a href="#2-1-How-sed-works" class="headerlink" title="2.1 How sed works"></a>2.1 How sed works</h2><p>sed命令会维持两个缓冲区：pattern space，hold space。sed只会对pattern space做处理，hold space负责缓存处理之前的内容(h,H,x,g,G会move data between both space)。<br>首先，sed读取输入流的一行内容到pattern space。如果addr匹配则执行command。当script执行完毕，pattern space中的内容输出到output steam(不管这一行匹没匹配上都会输出pattern space中的内容，如例1，例2)。<br><strong>【addr与command的说明】</strong><br>    命令格式：<br>    <code>sed options… [script] [inputfile]</code><br>    script格式：<br>        <code>[addr]X[options]</code><br>    <code>addr</code>: line address.描述行的地址，即对什么样的行操作指令X<br>    <code>X</code>: command<br>    <code>options</code>: X的参数</p>
<h2 id="2-2-The-s-Command"><a href="#2-2-The-s-Command" class="headerlink" title="2.2 The s Command"></a>2.2 The s Command</h2><p>语法：‘s/regexp/replacement/flags’</p>
<ol>
<li>sed中的正则表达式<br> sed中的正则表达式匹配方式是这样的：如果这一行中出现了正则表达式的内容，这一行才算匹配成功。<br> 当(){}+*表示特殊字符时需要转义，如果是匹配的字符串中的(){}则不需要转义。注意[]表示特殊含义时不需要转义。<br> 各种特殊字符的使用</li>
</ol>
<blockquote>
<p>一个特例<code>.*(.*)</code></p>
</blockquote>
<ol>
<li>\n的含义<br> \n（n是1-9的任意一个数字）：标识匹配到的第n个模式。何为模式？就是括号中匹配到的内容。<br>如：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> hello | sed ‘s/\([a-z]*\).*/\1/ </span><br><span class="line">结果为：hello，\1表示的就是hello。</span><br><span class="line"><span class="built_in">echo</span> hello123|sed <span class="string">&#x27;s/\([a-z]*\)\([0-9]\&#123;3\&#125;\)/\2\1/&#x27;</span></span><br><span class="line">结果为：123hello，\1匹配到的是hello，\2匹配到的是123</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>一些有意思的例子：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> absdfa12312asdfa | sed <span class="string">&#x27;s/[a-z]*\([0-9]*\)[a-z]*/\1/&#x27;</span> </span><br><span class="line">12312</span><br></pre></td></tr></table></figure><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> absdfa12312asdfa123asf | sed <span class="string">&#x27;s/[a-z]*\([0-9]*\)[a-z]*/\1/&#x27;</span> </span><br><span class="line">12312123asf</span><br></pre></td></tr></table></figure><br>要想用某一部分替代整行，正则表达式需要严格匹配整行的每一部分。</p>
<img src="/JeckFS/2020/04/09/sed/sed-4.png" class="" title="This is an image.">
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> absdfa12312asdfa123asf | sed <span class="string">&#x27;s/[[:digit:]]\+/M\Uaa\Ezz/&#x27;</span> </span><br><span class="line">absdfaMAAzzasdfa123asf</span><br></pre></td></tr></table></figure>
<p><strong>常用的flags：</strong><br><strong>g</strong>：全局替换<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> a-b-|sed <span class="string">&#x27;s/[[:alpha:]]/A/&#x27;</span>       </span><br><span class="line">A-b-</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> a-b-|sed <span class="string">&#x27;s/[[:alpha:]]/A/g&#x27;</span> </span><br><span class="line">A-A-</span><br></pre></td></tr></table></figure><br><strong>number:</strong></p>
<ol>
<li>替换第number个位置<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> a-b-|sed <span class="string">&#x27;s/[[:alpha:]]/A/2&#x27;</span> </span><br><span class="line">a-A-</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> a-b-|sed <span class="string">&#x27;s/[[:alpha:]]/A/1&#x27;</span> </span><br><span class="line">A-b-</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> a-b-|sed <span class="string">&#x27;s/[[:alpha:]]/A/3&#x27;</span> </span><br><span class="line">a-b-</span><br></pre></td></tr></table></figure></li>
<li>配合g使用，表示从第number个匹配处开始往后替换全部。<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> a-b--c--d-|sed <span class="string">&#x27;s/[[:alpha:]]/A/2g&#x27;</span> </span><br><span class="line">a-A--A--A-</span><br></pre></td></tr></table></figure>
<strong>P:</strong></li>
<li>p单用时的作用：打印pattern space中的内容，常与-n连用。注意ep与pe的结果不同。<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> -e <span class="string">&quot;abc\n123\ndef&quot;</span> | sed <span class="string">&#x27;1p&#x27;</span> </span><br><span class="line">abc <span class="comment"># script(‘1p’)的处理结果</span></span><br><span class="line">abc <span class="comment"># script执行完毕后输出的pattern space中的内容</span></span><br><span class="line">123 <span class="comment"># script执行完毕后输出的pattern space中的内容</span></span><br><span class="line">def <span class="comment"># script执行完毕后输出的pattern space中的内容</span></span><br></pre></td></tr></table></figure></li>
<li>使用-n可以压制pattern space中内容的输出：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> -e <span class="string">&quot;abc\n123\ndef&quot;</span> | sed -n <span class="string">&#x27;1p&#x27;</span> </span><br><span class="line">输出：abc</span><br></pre></td></tr></table></figure>
<ol>
<li>使用-n后，在整个脚本执行完了后不会输出：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> -e <span class="string">&quot;abcde\n1234\nxyz&quot;</span> | sed -n <span class="string">&#x27;p;/[0-9]\+/p&#x27;</span> </span><br><span class="line">abcde <span class="comment"># p</span></span><br><span class="line">1234  <span class="comment"># p</span></span><br><span class="line">1234  <span class="comment"># [0-9]\+</span></span><br><span class="line">xyz   <span class="comment"># p</span></span><br><span class="line">$ <span class="built_in">echo</span> -e <span class="string">&quot;abcde\n1234\nxyz&quot;</span> | sed <span class="string">&#x27;p;/[0-9]\+/p&#x27;</span> </span><br><span class="line">abcde <span class="comment"># 执行p时的输出</span></span><br><span class="line">abcde <span class="comment"># 整个script执行完了后的输出</span></span><br><span class="line">1234  <span class="comment"># 执行p的输出</span></span><br><span class="line">1234  <span class="comment"># 执行[0-9]\+的输出</span></span><br><span class="line">1234  <span class="comment"># 整个script执行完了后的输出</span></span><br><span class="line">xyz   <span class="comment"># 执行p时的输出</span></span><br><span class="line">xyz   <span class="comment"># 整个script执行完了后的输出</span></span><br><span class="line">与s结合：当发生替换时，打印pattern space中的内容(打印发生替换的行)。</span><br><span class="line">$ <span class="built_in">echo</span> -e <span class="string">&quot;abcde\n1234\nxyz&quot;</span> | sed -n <span class="string">&#x27;s/[0-9]\+/SSSS/p&#x27;</span> </span><br><span class="line">SSSS</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> -e <span class="string">&quot;abcde\n1234\nxyz&quot;</span> | sed -n <span class="string">&#x27;s/[0-9]\+/SSSS/&#x27;</span></span><br><span class="line"><span class="comment"># 无输出</span></span><br><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> -e <span class="string">&quot;abcde\nabc123abc\nxyz&quot;</span> | sed -n <span class="string">&#x27;s/[0-9]\+/SSSS/p&#x27;</span>   </span><br><span class="line">输出：abcSSSSabc</span><br></pre></td></tr></table></figure>
<p><strong>w filename:</strong></p>
<ol>
<li>将替换后的结果写入到filename文件中。</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> -e <span class="string">&quot;abcde\nabc123abc\n123&quot;</span> | sed -n <span class="string">&#x27;s/[0-9]\+/SSSS/w /dev/stderr&#x27;</span>   </span><br><span class="line">abcSSSSabc </span><br><span class="line">SSSS </span><br><span class="line">$ <span class="built_in">echo</span> -e <span class="string">&quot;abcde\nabc123abc\n123&quot;</span> | sed -n <span class="string">&#x27;s/[0-9]\+/SSSS/w /dev/stdout&#x27;</span> </span><br><span class="line">abcSSSSabc </span><br><span class="line">SSSS</span><br><span class="line">$ <span class="built_in">echo</span> -e <span class="string">&quot;abcde\nabc123abc\n123&quot;</span> | sed -n <span class="string">&#x27;s/[0-9]\+/SSSS/w /dev/null&#x27;</span></span><br><span class="line"><span class="comment"># 无输出</span></span><br></pre></td></tr></table></figure>
<p><strong>I/i:</strong></p>
<ol>
<li>匹配时不区分大小写<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> -e <span class="string">&quot;abcde\nabc123abc\n123\nABC&quot;</span> | sed -n <span class="string">&#x27;s/[a-z]\+/SSSS/gpi&#x27;</span> </span><br><span class="line">SSSS </span><br><span class="line">SSSS123SSSS </span><br><span class="line">SSSS</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="2-3-Often-Used-Commands"><a href="#2-3-Often-Used-Commands" class="headerlink" title="2.3 Often-Used Commands"></a>2.3 Often-Used Commands</h2><ol>
<li><code>q [exit-code]</code>: 退出执行，可指定exit-code<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">seq</span> 10 | sed 3q6 </span><br><span class="line">1 </span><br><span class="line">2 </span><br><span class="line">3 </span><br><span class="line">$ <span class="built_in">echo</span> $?          </span><br><span class="line">6</span><br></pre></td></tr></table></figure></li>
<li><p><code>d</code>: 删除pattern space，并开始下一个循环。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 4 | sed <span class="string">&#x27;2d&#x27;</span> </span><br><span class="line">1 </span><br><span class="line">3 </span><br><span class="line">4 </span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 4 | sed <span class="string">&#x27;2,3d&#x27;</span> </span><br><span class="line">1 </span><br><span class="line">4</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>p</code>: 见上。</p>
</li>
<li><p><code>n</code>: replace the pattern space with the next line of input.常用于跳过某行。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 每三行替换一个</span></span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 6 | sed <span class="string">&#x27;n;n;s/./x/&#x27;</span> </span><br><span class="line">1 </span><br><span class="line">2 </span><br><span class="line">x </span><br><span class="line">4 </span><br><span class="line">5 </span><br><span class="line">x</span><br><span class="line"></span><br><span class="line">使用扩展的address语法：first~step，first是起始行，step是间隔</span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 6 | sed <span class="string">&#x27;0~3s/./x/&#x27;</span> </span><br><span class="line">1 </span><br><span class="line">2 </span><br><span class="line">x </span><br><span class="line">4 </span><br><span class="line">5 </span><br><span class="line">x</span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 9 | sed <span class="string">&#x27;3~4s/./x/&#x27;</span> </span><br><span class="line">1 </span><br><span class="line">2 </span><br><span class="line">x </span><br><span class="line">4 </span><br><span class="line">5 </span><br><span class="line">6 </span><br><span class="line">x </span><br><span class="line">8 </span><br><span class="line">9</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>&#123;commands&#125;</code>: 对于某行或指定范围内的行，应用多条命令。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 3 | sed -n <span class="string">&#x27;2&#123;s/2/X/;p&#125;&#x27;</span> </span><br><span class="line">X</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="2-4-Less-Frequently-Used-Commands"><a href="#2-4-Less-Frequently-Used-Commands" class="headerlink" title="2.4 Less Frequently-Used Commands"></a>2.4 Less Frequently-Used Commands</h2><ol>
<li><code>y/source-chars/dest-chars/</code>: Transliterate any characters in the pattern space which match any of the source-chars with the corresponding character in dest-chars.<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">echo</span> <span class="string">&quot;abcdefg&quot;</span> | sed <span class="string">&#x27;y/acg/135/&#x27;</span>    </span><br><span class="line">1b3def5 </span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">echo</span> <span class="string">&quot;abcdefg&quot;</span> | sed <span class="string">&#x27;y/acg/1356/&#x27;</span> </span><br><span class="line">sed：-e 表达式 <span class="comment">#1，字符 11：“y”命令的字符串长度不同</span></span><br></pre></td></tr></table></figure></li>
<li><code>a text</code>: Appending text after a line.</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 3 | sed <span class="string">&#x27;2ahello&#x27;</span> </span><br><span class="line">1 </span><br><span class="line">2 </span><br><span class="line">hello </span><br><span class="line">3</span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 3 | sed <span class="string">&#x27;2a\ </span></span><br><span class="line"><span class="string">&gt; hello\ </span></span><br><span class="line"><span class="string">&gt; world </span></span><br><span class="line"><span class="string">&gt; 3s/./X/&#x27;</span> </span><br><span class="line">1 </span><br><span class="line">2 </span><br><span class="line">hello </span><br><span class="line">world </span><br><span class="line">X</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用-e可以拼接：</span></span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 3 | sed -e <span class="string">&#x27;2a\&#x27;</span> -e hello </span><br><span class="line">1 </span><br><span class="line">2 </span><br><span class="line">hello </span><br><span class="line">3 </span><br><span class="line">[yfs@yfs-manjaro sed]$ var=helloworld </span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 3 | sed -e <span class="string">&#x27;2a\&#x27;</span> -e <span class="variable">$var</span> </span><br><span class="line">1 </span><br><span class="line">2 </span><br><span class="line">helloworld </span><br><span class="line">3</span><br></pre></td></tr></table></figure>
<ol>
<li><code>i text</code>: insert text before a line.<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 3 | sed <span class="string">&#x27;2ihello&#x27;</span> </span><br><span class="line">1 </span><br><span class="line">hello </span><br><span class="line">2 </span><br><span class="line">3</span><br><span class="line"></span><br><span class="line">使用-e分割插入内容</span><br><span class="line">[yfs@yfs-manjaro sed]$ var=hello </span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 3 | sed <span class="string">&#x27;2i\&#x27;</span> -e <span class="variable">$var</span> </span><br><span class="line">sed：-e 表达式 <span class="comment">#1，字符 2：命令后含有多余的字符 </span></span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 3 | sed -e <span class="string">&#x27;2i\&#x27;</span> -e <span class="variable">$var</span> </span><br><span class="line">1 </span><br><span class="line">hello </span><br><span class="line">2 </span><br><span class="line">3</span><br></pre></td></tr></table></figure></li>
<li><p><code>c text</code>: Replaces the line(s) with text.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 10 | sed <span class="string">&#x27;2,9c hello&#x27;</span> </span><br><span class="line">1 </span><br><span class="line">hello </span><br><span class="line">10 </span><br><span class="line">[yfs@yfs-manjaro sed]$ var=hello </span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 10 | sed -e <span class="string">&#x27;2,9c\&#x27;</span> -e <span class="variable">$var</span> </span><br><span class="line">1 </span><br><span class="line">hello </span><br><span class="line">10</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>l n</code>: Print the pattern space in an unambiguous form: </p>
</li>
</ol>
<ul>
<li>Non-printable characters(and the \ character) are printed in C-style escaped form; </li>
<li>Long lines are split, with a trailing \ character to indicate the split; </li>
<li>The end of each line is marker with a $.<br>  <code>n</code> specifies the desire line-wrap lenth. <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 3|sed -n <span class="string">&#x27;l 3&#x27;</span>     </span><br><span class="line">1$ </span><br><span class="line">2$ </span><br><span class="line">3$</span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">echo</span> -e <span class="string">&quot;helloworld&quot;</span>|sed -n <span class="string">&#x27;l0&#x27;</span> </span><br><span class="line">helloworld$ </span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">echo</span> -e <span class="string">&quot;helloworld&quot;</span>|sed -n <span class="string">&#x27;l&#x27;</span>  </span><br><span class="line">helloworld$ </span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">echo</span> -e <span class="string">&quot;helloworld&quot;</span>|sed -n <span class="string">&#x27;l3&#x27;</span> </span><br><span class="line">he\ </span><br><span class="line">ll\ </span><br><span class="line">ow\ </span><br><span class="line">or\ </span><br><span class="line">ld$</span><br><span class="line"></span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">echo</span> <span class="string">&quot;abc&quot;</span> | sed -n <span class="string">&#x27;l1&#x27;</span> </span><br><span class="line">\ </span><br><span class="line">a\ </span><br><span class="line">b\ </span><br><span class="line">c$ </span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">echo</span> <span class="string">&quot;abc&quot;</span> | sed -n <span class="string">&#x27;l&#x27;</span>  </span><br><span class="line">abc$ </span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">echo</span> <span class="string">&quot;abc&quot;</span> | sed -n <span class="string">&#x27;l2&#x27;</span> </span><br><span class="line">a\ </span><br><span class="line">b\ </span><br><span class="line">c$ </span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">echo</span> <span class="string">&quot;abc&quot;</span> | sed -n <span class="string">&#x27;l3&#x27;</span> </span><br><span class="line">ab\ </span><br><span class="line">c$ </span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">echo</span> <span class="string">&quot;abc&quot;</span> | sed -n <span class="string">&#x27;l4&#x27;</span> </span><br><span class="line">abc$</span><br></pre></td></tr></table></figure></li>
</ul>
<ol>
<li><code>r filename</code>: Queue the contents of filename to be read and inserted into the output stream at the end of the current cycle. If filename cannot be read, it is treated as if it were an empty file, without any error indication.</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">cat</span> input </span><br><span class="line">this is the first line. </span><br><span class="line">this is the second line. </span><br><span class="line">this is the third line.</span><br><span class="line"></span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 4 | sed <span class="string">&#x27;2,3r input&#x27;</span>  </span><br><span class="line">1 </span><br><span class="line">2 </span><br><span class="line">this is the first line. </span><br><span class="line">this is the second line. </span><br><span class="line">this is the third line. </span><br><span class="line">3 </span><br><span class="line">this is the first line. </span><br><span class="line">this is the second line. </span><br><span class="line">this is the third line. </span><br><span class="line">4</span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 4 | sed <span class="string">&#x27;$r input&#x27;</span>  </span><br><span class="line">1 </span><br><span class="line">2 </span><br><span class="line">3 </span><br><span class="line">4 </span><br><span class="line">this is the first line. </span><br><span class="line">this is the second line. </span><br><span class="line">this is the third line.</span><br></pre></td></tr></table></figure>
<ol>
<li><code>w filename</code>: Write the pattern space to filename.<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">echo</span> -e <span class="string">&quot;abc123\nabc\n123&quot;</span> | sed <span class="string">&#x27;/[0-9]*/w filename&#x27;</span> </span><br><span class="line">abc123 </span><br><span class="line">abc </span><br><span class="line">123 </span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">cat</span> filename  </span><br><span class="line">abc123 </span><br><span class="line">abc </span><br><span class="line">123</span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">echo</span> -e <span class="string">&quot;abc123\nabc\n123&quot;</span> | sed -n <span class="string">&#x27;/[0-9]\+/w filename&#x27;</span>   </span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">cat</span> filename  </span><br><span class="line">abc123 </span><br><span class="line">123</span><br></pre></td></tr></table></figure></li>
<li><code>h</code>: Replace the contents of the hold space with the contents of the pattern space.<br>将pattern space中的内容存入hold space中</li>
<li><code>g</code>: Replace the contents of the pattern space with the contents of the hold space.<br>用hold space中的内容覆盖pattern space中的内容</li>
<li><code>H</code>: 原文：Append a newline to the contents of the hold space, and then append the contents of the pattern space to that of the hold space.</li>
<li><code>G</code>: 原文：Append a newline to the contents of the pattern space, and then append thecontents of the hold space to that of the pattern space.</li>
<li><code>x</code>: 交换hold space与pattern space中的内容。</li>
</ol>
<p>【助记】h: set the hold space value; g: set pattern space with value got from hold space<br>【注意】hold space中如果没有通过h或H赋值，那么他一直是空的，换言之hold space如果不是人为更改其内容便不会更改。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将第2行存入hold space，第5-7行用hold space内容替代</span></span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 10 | sed <span class="string">&#x27;2h;5,7g&#x27;</span> </span><br><span class="line">1 </span><br><span class="line">2 </span><br><span class="line">3 </span><br><span class="line">4 </span><br><span class="line">2 </span><br><span class="line">2 </span><br><span class="line">2 </span><br><span class="line">8 </span><br><span class="line">9 </span><br><span class="line">10</span><br><span class="line"><span class="comment"># 当执行到第2行时，先追加一个空行，然后在第5-7行将hold space中的内容替换到pattern space中。</span></span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 10 | sed <span class="string">&#x27;2H;5,7g&#x27;</span> </span><br><span class="line">1 </span><br><span class="line">2 </span><br><span class="line">3 </span><br><span class="line">4 </span><br><span class="line"></span><br><span class="line">2 </span><br><span class="line"></span><br><span class="line">2 </span><br><span class="line"></span><br><span class="line">2 </span><br><span class="line">8 </span><br><span class="line">9 </span><br><span class="line">10</span><br><span class="line"></span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 10| sed <span class="string">&#x27;2h;5H;8g&#x27;</span> </span><br><span class="line">1 </span><br><span class="line">2 <span class="comment"># 第2行：hold space为2</span></span><br><span class="line">3 </span><br><span class="line">4 </span><br><span class="line">5 <span class="comment"># 第5行：在hold space原有内容上追加一个新行5 (目前是2\n5)</span></span><br><span class="line">6 </span><br><span class="line">7 </span><br><span class="line">2 <span class="comment"># 第8行：将hold space中的内容替换到pattern space中</span></span><br><span class="line">5 </span><br><span class="line">9 </span><br><span class="line">10</span><br></pre></td></tr></table></figure>
<ol>
<li><code>e shell-code</code>: 可以执行shell语句。</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">ls</span> </span><br><span class="line">foo<span class="comment">#bar  input  input2  newfile  one  three  two </span></span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">echo</span> a | sed <span class="string">&#x27;1e ls&#x27;</span> </span><br><span class="line">foo<span class="comment">#bar </span></span><br><span class="line">input </span><br><span class="line">input2 </span><br><span class="line">newfile </span><br><span class="line">one </span><br><span class="line">three </span><br><span class="line">two </span><br><span class="line">a</span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 3 | sed <span class="string">&#x27;1e ls&#x27;</span>       </span><br><span class="line">foo<span class="comment">#bar </span></span><br><span class="line">input </span><br><span class="line">input2 </span><br><span class="line">newfile </span><br><span class="line">one </span><br><span class="line">three </span><br><span class="line">two </span><br><span class="line">1 </span><br><span class="line">2 </span><br><span class="line">3</span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 3 | sed <span class="string">&#x27;2e ls&#x27;</span>  </span><br><span class="line">1 </span><br><span class="line">foo<span class="comment">#bar </span></span><br><span class="line">input </span><br><span class="line">input2 </span><br><span class="line">newfile </span><br><span class="line">one </span><br><span class="line">three </span><br><span class="line">two </span><br><span class="line">2 </span><br><span class="line">3</span><br></pre></td></tr></table></figure>
<h2 id="2-5-Commands-Requiring-a-newline"><a href="#2-5-Commands-Requiring-a-newline" class="headerlink" title="2.5 Commands Requiring a newline"></a>2.5 Commands Requiring a newline</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a,c,i(append/change/insert)</span><br><span class="line"><span class="comment"># (comment)</span></span><br><span class="line">r,R,w,W (reading and writing files)</span><br><span class="line">e (shell-command)</span><br><span class="line">s///w</span><br></pre></td></tr></table></figure>
<h2 id="2-6-Address的使用"><a href="#2-6-Address的使用" class="headerlink" title="2.6 Address的使用"></a>2.6 Address的使用</h2><ol>
<li>Selecting lines by numbers<br>address的种类：<br> • number<br> • $: 最后一行<br> • first~step: 从第first开始每隔step选一行</li>
<li>selecting lines by text matching<br> Regexp address如果让pattern space发生变化，则regexp作用于变化后的pattern space上。</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 先将第2行修改为X，然后再使用/[0-9]/p进行正则匹配</span></span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 3 | sed -n <span class="string">&#x27;s/2/X/; /[0-9]/p&#x27;</span> </span><br><span class="line">1 </span><br><span class="line">3</span><br></pre></td></tr></table></figure>
<p><code>/regexp/</code>：最常用的方式。如果regexp中匹配‘\‘，则需要转义。<br><code>\%regexp%</code>：%可以是任何一个字符。regexp可以匹配’/’而不需要转义。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[yfs@yfs-manjaro sed]$ sed -n <span class="string">&#x27;\%bash$%p&#x27;</span> /etc/passwd </span><br><span class="line">root:x:0:0::/root:/bin/bash </span><br><span class="line">yfs:x:1000:1001:yfs:/home/yfs:/bin/bash </span><br><span class="line">[yfs@yfs-manjaro sed]$ sed -n <span class="string">&#x27;\0bash$0p&#x27;</span> /etc/passwd   </span><br><span class="line">root:x:0:0::/root:/bin/bash </span><br><span class="line">yfs:x:1000:1001:yfs:/home/yfs:/bin/bash </span><br><span class="line">[yfs@yfs-manjaro sed]$ sed -n <span class="string">&#x27;\abash$ap&#x27;</span> /etc/passwd   </span><br><span class="line">sed：-e 表达式 <span class="comment">#1，字符 9：未终止的“s”命令 </span></span><br><span class="line">[yfs@yfs-manjaro sed]$ sed -n <span class="string">&#x27;\bbash$bp&#x27;</span> /etc/passwd   </span><br><span class="line">sed：-e 表达式 <span class="comment">#1，字符 0：前面没有正则表达式 </span></span><br><span class="line">[yfs@yfs-manjaro sed]$ sed -n <span class="string">&#x27;\&amp;bash$&amp;p&#x27;</span> /etc/passwd   </span><br><span class="line">root:x:0:0::/root:/bin/bash </span><br><span class="line">yfs:x:1000:1001:yfs:/home/yfs:/bin/bash </span><br><span class="line">[yfs@yfs-manjaro sed]$ sed -n <span class="string">&#x27;\^bash$^p&#x27;</span> /etc/passwd   </span><br><span class="line">root:x:0:0::/root:/bin/bash </span><br><span class="line">yfs:x:1000:1001:yfs:/home/yfs:/bin/bash </span><br><span class="line">[yfs@yfs-manjaro sed]$ sed -n <span class="string">&#x27;\-bash$-p&#x27;</span> /etc/passwd   </span><br><span class="line">root:x:0:0::/root:/bin/bash </span><br><span class="line">yfs:x:1000:1001:yfs:/home/yfs:/bin/bash </span><br><span class="line">[yfs@yfs-manjaro sed]$ sed -n <span class="string">&#x27;\Abash$Ap&#x27;</span> /etc/passwd   </span><br><span class="line">root:x:0:0::/root:/bin/bash </span><br><span class="line">yfs:x:1000:1001:yfs:/home/yfs:/bin/bash</span><br></pre></td></tr></table></figure><br><code>/regexp/I</code>或者<code>\%regexp%I</code>：不区分大小写的匹配<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">cat</span> input </span><br><span class="line">this is the first line. </span><br><span class="line">this is the second line. </span><br><span class="line">this is the third line. </span><br><span class="line">THIS is the fourth line.</span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">cat</span> input | sed <span class="string">&#x27;/^this/p&#x27;</span> </span><br><span class="line">this is the first line. </span><br><span class="line">this is the first line. </span><br><span class="line">this is the second line. </span><br><span class="line">this is the second line. </span><br><span class="line">this is the third line. </span><br><span class="line">this is the third line. </span><br><span class="line">THIS is the fourth line. </span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">cat</span> input | sed -n <span class="string">&#x27;/^this/p&#x27;</span> </span><br><span class="line">this is the first line. </span><br><span class="line">this is the second line. </span><br><span class="line">this is the third line. </span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">cat</span> input | sed -n <span class="string">&#x27;/^this/Ip&#x27;</span> </span><br><span class="line">this is the first line. </span><br><span class="line">this is the second line. </span><br><span class="line">this is the third line. </span><br><span class="line">THIS is the fourth line.</span><br></pre></td></tr></table></figure><br><code>/regexp/M</code>或者<code>\%regexp%M</code>：略</p>
<ol>
<li>Range Address</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">情况1：</span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 10 | sed -n <span class="string">&#x27;4,6p&#x27;</span> </span><br><span class="line">4 </span><br><span class="line">5 </span><br><span class="line">6</span><br><span class="line"><span class="comment"># 从first address开始直到满足second address正则表达式的行结束。若second address可以匹配first address的行，则first address对应行不算，从它之后开始匹配，如第2，3个例子。</span></span><br><span class="line">情况2：</span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 10 | sed -n <span class="string">&#x27;4,/[0-9]/p&#x27;</span>  </span><br><span class="line">4 </span><br><span class="line">5</span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 10 | sed -n <span class="string">&#x27;s/5/X/;5,/[5-9]/p&#x27;</span> </span><br><span class="line">X </span><br><span class="line">6</span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 10 | sed -n <span class="string">&#x27;s/6/Y/;5,/[5-9]/p&#x27;</span>    5 </span><br><span class="line">Y </span><br><span class="line">7</span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 10 | sed -n <span class="string">&#x27;6,9s/[0-9]/X/;5,/[5-9]/p&#x27;</span> </span><br><span class="line">5 </span><br><span class="line">X </span><br><span class="line">X </span><br><span class="line">X </span><br><span class="line">X </span><br><span class="line">10</span><br><span class="line">情况3：</span><br><span class="line">若second address &lt;= first address, 则只匹配一行。</span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 10 | sed -n <span class="string">&#x27;6,9s/[0-9]/X/;5,1p&#x27;</span> </span><br><span class="line">5 </span><br><span class="line"><span class="comment"># 这一列并不是特殊情况，仍然符合这个原则。</span></span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 10 | sed -n <span class="string">&#x27;6,9s/[0-9]/X/;5,/[0-4]/p&#x27;</span> </span><br><span class="line">5 </span><br><span class="line">X </span><br><span class="line">X </span><br><span class="line">X </span><br><span class="line">X </span><br><span class="line">10</span><br><span class="line"></span><br><span class="line">情况4：一种特殊情况</span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 10 | sed -n <span class="string">&#x27;1,/[0-9]/p&#x27;</span> </span><br><span class="line">1 </span><br><span class="line">2 </span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 10 | sed -n <span class="string">&#x27;0,/[0-9]/p&#x27;</span> </span><br><span class="line">1</span><br><span class="line"></span><br><span class="line">情况5：addr1,+N，匹配[addr1, addr1+N]行</span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 10 | sed -n <span class="string">&#x27;4,+3p&#x27;</span> </span><br><span class="line">4 </span><br><span class="line">5 </span><br><span class="line">6 </span><br><span class="line">7</span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 10 | sed -n <span class="string">&#x27;/[2|7]/,+2p&#x27;</span> </span><br><span class="line">2 </span><br><span class="line">3 </span><br><span class="line">4 </span><br><span class="line">7 </span><br><span class="line">8 </span><br><span class="line">9</span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 10 | sed -n <span class="string">&#x27;/[0-9]/,+2p&#x27;</span> </span><br><span class="line">1 </span><br><span class="line">2 </span><br><span class="line">3 </span><br><span class="line">4 </span><br><span class="line">5 </span><br><span class="line">6 </span><br><span class="line">7 </span><br><span class="line">8 </span><br><span class="line">9 </span><br><span class="line">10</span><br><span class="line"></span><br><span class="line">情况6：addr1，~N: 从addr1开始，直到遇到N的倍数停止</span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 10 | sed -n <span class="string">&#x27;4,~5p&#x27;</span> </span><br><span class="line">4 </span><br><span class="line">5 </span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 10 | sed -n <span class="string">&#x27;4,~2p&#x27;</span> </span><br><span class="line">4 </span><br><span class="line">5 </span><br><span class="line">6</span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 10 | sed -n <span class="string">&#x27;/[1|6]/,~2p&#x27;</span>  </span><br><span class="line">1 </span><br><span class="line">2 </span><br><span class="line">6 </span><br><span class="line">7 </span><br><span class="line">8 </span><br><span class="line">10 <span class="comment"># 不知道为什么会输出</span></span><br><span class="line">[yfs@yfs-manjaro sed]$ <span class="built_in">seq</span> 10 | sed -n <span class="string">&#x27;6,~2p&#x27;</span>       </span><br><span class="line">6 </span><br><span class="line">7 </span><br><span class="line">8</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/327335bfe9b4">参考教程</a></p>
<h1 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h1><p>sed匹配单引号： echo “asdfas’asdf” | sed s#\’#\”#g<br>注意sed 后面的命令不能添加单引号或者双引号<br>sed <u>‘s/‘</u> <u>“‘“</u> <u>/</u> <u>‘“‘</u> <u>‘/g’</u> test<br>解析下：<br>‘s/‘ =&gt; 要进行替换操作，后紧跟匹配字符<br>“‘“ =&gt; 用双引号包裹着单引号<br>/   =&gt;分割符<br>‘“‘  =&gt; 用单引号包裹着双引号<br>‘/g’ =&gt;分隔符，全局替换</p>
<p>echo asdf | sed ‘s/(.*)/‘“‘\1’”‘/g’ # 在asdf前后加一个单引号</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://jeckfs.gitee.io/JeckFS">YFS</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://jeckfs.gitee.io/JeckFS/2020/04/09/sed/">http://jeckfs.gitee.io/JeckFS/2020/04/09/sed/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://jeckfs.gitee.io/JeckFS" target="_blank">JeckFS</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/JeckFS/tags/Linux/">Linux</a></div><div class="post_share"><div class="social-share" data-image="https://img1.baidu.com/it/u=2860717797,2343059675&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=889&amp;h=500" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/gh/overtrue/share.js@master/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/JeckFS/2020/04/09/awk/"><img class="prev-cover" src="https://img1.baidu.com/it/u=4132836557,2626223199&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=500&amp;h=281" onerror="onerror=null;src='/JeckFS/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">awk</div></div></a></div><div class="next-post pull-right"><a href="/JeckFS/2020/04/06/leetcode174-%E5%9C%B0%E4%B8%8B%E5%9F%8E%E6%B8%B8%E6%88%8F/"><img class="next-cover" src="https://img2.baidu.com/it/u=3747114911,414713113&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=882&amp;h=500" onerror="onerror=null;src='/JeckFS/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">leetcode174.地下城游戏</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/JeckFS/2020/11/04/Linux%E5%86%85%E6%A0%B8%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E5%85%A8%E8%A7%A3%E6%9E%90/" title="Linux内核核心知识全解析"><img class="cover" src="https://img0.baidu.com/it/u=1955391644,3428991101&fm=253&fmt=auto&app=138&f=JPEG?w=700&h=466" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-11-04</div><div class="title">Linux内核核心知识全解析</div></div></a></div><div><a href="/JeckFS/2022/08/15/Linux%E9%98%B2%E7%81%AB%E5%A2%99%E8%AE%BE%E7%BD%AE/" title="Linux防火墙设置"><img class="cover" src="https://img0.baidu.com/it/u=3927742728,83245337&fm=253&fmt=auto&app=138&f=JPEG?w=800&h=500" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-15</div><div class="title">Linux防火墙设置</div></div></a></div><div><a href="/JeckFS/2022/12/12/NAS-SAN%E5%BC%82%E5%90%8C%E7%82%B9/" title="NAS-SAN异同点"><img class="cover" src="https://img1.baidu.com/it/u=2860717797,2343059675&fm=253&fmt=auto&app=138&f=JPEG?w=889&h=500" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-12-12</div><div class="title">NAS-SAN异同点</div></div></a></div><div><a href="/JeckFS/2020/04/09/awk/" title="awk"><img class="cover" src="https://img1.baidu.com/it/u=4132836557,2626223199&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=281" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-04-09</div><div class="title">awk</div></div></a></div><div><a href="/JeckFS/2022/09/14/diff%E8%AF%A6%E8%A7%A3/" title="diff详解"><img class="cover" src="https://img1.baidu.com/it/u=2656997690,163773951&fm=253&fmt=auto&app=120&f=JPEG?w=889&h=500" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-09-14</div><div class="title">diff详解</div></div></a></div><div><a href="/JeckFS/2020/10/23/linux%E5%8D%87%E7%BA%A7%E5%86%85%E6%A0%B8/" title="linux升级内核"><img class="cover" src="https://img0.baidu.com/it/u=297071526,3870034878&fm=253&fmt=auto&app=138&f=JPEG?w=499&h=332" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-10-23</div><div class="title">linux升级内核</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/JeckFS/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">YFS</div><div class="author-info__description">快乐每一天</div></div><div class="card-info-data site-data is-center"><a href="/JeckFS/archives/"><div class="headline">文章</div><div class="length-num">256</div></a><a href="/JeckFS/tags/"><div class="headline">标签</div><div class="length-num">72</div></a><a href="/JeckFS/categories/"><div class="headline">分类</div><div class="length-num">67</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#0-%E8%A1%A5%E5%85%85"><span class="toc-number">1.</span> <span class="toc-text">0. 补充</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E9%B8%9F%E5%93%A5%E7%A7%81%E6%88%BF%E8%8F%9C"><span class="toc-number">2.</span> <span class="toc-text">1. 鸟哥私房菜</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-sed%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD"><span class="toc-number">2.1.</span> <span class="toc-text">1.1 sed常用功能</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-sed-pdf%E6%95%99%E7%A8%8B"><span class="toc-number">3.</span> <span class="toc-text">2. sed pdf教程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-How-sed-works"><span class="toc-number">3.1.</span> <span class="toc-text">2.1 How sed works</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-The-s-Command"><span class="toc-number">3.2.</span> <span class="toc-text">2.2 The s Command</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-Often-Used-Commands"><span class="toc-number">3.3.</span> <span class="toc-text">2.3 Often-Used Commands</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-Less-Frequently-Used-Commands"><span class="toc-number">3.4.</span> <span class="toc-text">2.4 Less Frequently-Used Commands</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-Commands-Requiring-a-newline"><span class="toc-number">3.5.</span> <span class="toc-text">2.5 Commands Requiring a newline</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6-Address%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">3.6.</span> <span class="toc-text">2.6 Address的使用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A1%A5%E5%85%85"><span class="toc-number">4.</span> <span class="toc-text">补充</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/JeckFS/2023/02/03/Unix-%E6%A0%87%E5%87%86IO%E5%BA%93/" title="Unix-标准IO库"><img src="https://img2.baidu.com/it/u=48958987,1702342987&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=500&amp;h=281" onerror="this.onerror=null;this.src='/JeckFS/img/404.jpg'" alt="Unix-标准IO库"/></a><div class="content"><a class="title" href="/JeckFS/2023/02/03/Unix-%E6%A0%87%E5%87%86IO%E5%BA%93/" title="Unix-标准IO库">Unix-标准IO库</a><time datetime="2023-02-03T02:48:44.000Z" title="发表于 2023-02-03 10:48:44">2023-02-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/JeckFS/2023/02/01/hexo-hexo%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB/" title="hexo-hexo博客迁移"><img src="https://img0.baidu.com/it/u=3927742728,83245337&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=800&amp;h=500" onerror="this.onerror=null;this.src='/JeckFS/img/404.jpg'" alt="hexo-hexo博客迁移"/></a><div class="content"><a class="title" href="/JeckFS/2023/02/01/hexo-hexo%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB/" title="hexo-hexo博客迁移">hexo-hexo博客迁移</a><time datetime="2023-02-01T02:06:15.000Z" title="发表于 2023-02-01 10:06:15">2023-02-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/JeckFS/2023/01/31/nvm-nvm%E5%AE%89%E8%A3%85/" title="nvm-nvm安装"><img src="https://img0.baidu.com/it/u=297071526,3870034878&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=499&amp;h=332" onerror="this.onerror=null;this.src='/JeckFS/img/404.jpg'" alt="nvm-nvm安装"/></a><div class="content"><a class="title" href="/JeckFS/2023/01/31/nvm-nvm%E5%AE%89%E8%A3%85/" title="nvm-nvm安装">nvm-nvm安装</a><time datetime="2023-01-31T10:47:29.000Z" title="发表于 2023-01-31 18:47:29">2023-01-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/JeckFS/2023/01/31/git-git%E5%AE%89%E8%A3%85%E4%B8%8E%E5%8D%87%E7%BA%A7/" title="git-git安装与升级"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/JeckFS/img/404.jpg'" alt="git-git安装与升级"/></a><div class="content"><a class="title" href="/JeckFS/2023/01/31/git-git%E5%AE%89%E8%A3%85%E4%B8%8E%E5%8D%87%E7%BA%A7/" title="git-git安装与升级">git-git安装与升级</a><time datetime="2023-01-31T09:46:43.000Z" title="发表于 2023-01-31 17:46:43">2023-01-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/JeckFS/2023/01/17/Unix-ioctl%E5%87%BD%E6%95%B0/" title="Unix-ioctl函数"><img src="https://img2.baidu.com/it/u=1787475710,2159333383&amp;fm=253&amp;fmt=auto&amp;app=120&amp;f=JPEG?w=1280&amp;h=800" onerror="this.onerror=null;this.src='/JeckFS/img/404.jpg'" alt="Unix-ioctl函数"/></a><div class="content"><a class="title" href="/JeckFS/2023/01/17/Unix-ioctl%E5%87%BD%E6%95%B0/" title="Unix-ioctl函数">Unix-ioctl函数</a><time datetime="2023-01-17T06:25:45.000Z" title="发表于 2023-01-17 14:25:45">2023-01-17</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By YFS</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/JeckFS/js/utils.js"></script><script src="/JeckFS/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="/JeckFS/js/search/local-search.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>